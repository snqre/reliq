function Y(t){if(t==null||typeof t!="object")return String(t);try{return JSON.stringify(t)}catch{}return"[object Object]"}function j(t){return L(()=>structuredClone(t)).mapErr(i=>i.parse(e=>e!=null&&typeof e=="object"&&"name"in e&&"code"in e&&"message"in e&&typeof e.name=="string"&&typeof e.code=="number"&&typeof e.message=="string").map(e=>S(e)).unwrapOr(S()))}function b(t,i){return T()<0n?D("FPV.ERR_NEGATIVE_DECIMALS"):C({unwrap:e,decimals:T,representation:d,eq:u,lt:r,gt:a,lteq:s,gteq:l,add:x,sub:f,mul:O,div:y,pow:F,sqrt:N,convert:A,percentageOf:H,percentageGain:P,percentageLoss:R,percentageChange:k,sliceOf:V,addPercentage:c,subPercentage:p,toNumber:o});function e(){return b.Calculator.unwrap(t)}function T(){return i}function d(){return 10n**T()}function u(n){return b.Calculator.eq(t,n)}function r(n){return b.Calculator.lt(t,n)}function a(n){return b.Calculator.gt(t,n)}function s(n){return b.Calculator.lteq(t,n)}function l(n){return b.Calculator.gteq(t,n)}function x(n){return b.Calculator.add(t,n,T()).expect(h)}function f(n){return b.Calculator.sub(t,n,T()).expect(h)}function O(n){return b.Calculator.mul(t,n,T()).expect(h)}function y(n){return b.Calculator.div(t,n,T())}function F(n){return b.Calculator.pow(t,n,T())}function N(){return b.Calculator.sqrt(t,T())}function A(n){return b.Calculator.convert(t,T(),n)}function H(n){return b.Calculator.percentageOf(t,n,T())}function P(n){return b.Calculator.percentageGain(t,n,T())}function R(n){return b.Calculator.percentageLoss(t,n,T())}function k(n){return b.Calculator.percentageChange(t,n,T())}function V(n){return b.Calculator.sliceOf(t,n,T())}function c(n){return b.Calculator.addPercentage(t,n,T())}function p(n){return b.Calculator.subPercentage(t,n,T())}function o(){return Number(t)/Number(10n**T())}}(i=>i.Calculator=(()=>{return{unwrap:e,eq:T,lt:d,gt:u,lteq:r,gteq:a,add:s,sub:l,mul:x,div:f,pow:O,sqrt:y,convert:F,percentageOf:N,percentageGain:A,percentageLoss:H,percentageChange:P,sliceOf:R,addPercentage:k,subPercentage:V};function e(c){return typeof c=="bigint"?c:c.unwrap()}function T(c,p){return e(c)===e(p)}function d(c,p){return e(c)<e(p)}function u(c,p){return e(c)>e(p)}function r(c,p){return e(c)<=e(p)}function a(c,p){return e(c)>=e(p)}function s(c,p,o){return i(e(c)+e(p),o)}function l(c,p,o){return i(e(c)-e(p),o)}function x(c,p,o){let n=e(c),m=e(p),g=n*m;return i(o===0n?g:g/10n**o,o)}function f(c,p,o){let n=e(c),m=e(p);if(m===0n)return D("FPV.ERR_DIVISION_BY_ZERO");if(o===0n)return C(i(n/m,o).expect(h));let M=n*10n**o/m;return C(i(M,o).expect(h))}function O(c,p,o){let n=e(c),m=e(p);if(m<0n)return D("FPV.ERR_NEGATIVE_EXPONENT");let g=1n;for(;m>0n;)m%2n===1n&&(g=g*n/10n**o),n=n*n/10n**o,m/=2n;let M=F(g,0n,o);if(M.err())return M;let W=M.unwrap().unwrap();return i(W,o)}function y(c,p){let o=e(c);if(o<0n)return D("FPV.ERR_CANNOT_SQUARE_NAGATIVE");if(o===0n)return i(0n,p);let n=10n**p;n*=o;let m=n,g;do g=m,m=(g+n/g)/2n;while(m!==g);return i(m,p)}function F(c,p,o){if(p<0n)return D("FPV.ERR_NEGATIVE_DECIMALS");if(o<0n)return D("FPV.ERR_NEGATIVE_DECIMALS");let n=e(c),m;return o>p&&(m=10n**(o-p),n*=m),o<p&&(m=10n**(p-o),n/=m),C(i(n,o).expect(h))}function N(c,p,o){let n=e(c),m=e(p);return f(n,m,o).map(g=>g.unwrap()).and(g=>x(g,100n*10n**o,o))}function A(c,p,o){let n=e(c),m=e(p);return m<=n?i(0n,o):l(m,n,o).and(g=>f(g,n,o)).and(g=>x(g,100n*10n**o,o)).mapErr(g=>g)}function H(c,p,o){let n=e(c),m=e(p);return m>=n?i(0n,o):l(m,n,o).and(g=>f(g,n,o)).and(g=>x(g,100n*10n**o,o)).mapErr(g=>g)}function P(c,p,o){let n=e(c),m=e(p);return m<=n?H(n,m,o):A(n,m,o)}function R(c,p,o){let n=e(c),m=e(p),g=f(n,100n*10n**o,o);if(g.err())return g;let M=g.unwrap();return x(M,m,o)}function k(c,p,o){let n=e(c),m=e(p);return R(n,m,o).and(g=>s(n,g,o))}function V(c,p,o){let n=e(c),m=e(p);return R(n,m,o).and(g=>l(n,g,o))}})())(b||={});var _;(i=>i.Handler=(()=>{return{flag:e,all:T,any:d};function e(u){return u===null?E:u===void 0?E:w(u)}function T(...u){let r=[],a=0;for(;a<u.length;){let s=u.at(a);if(s.none())return s;r.push(s.unwrap()),a++}return w(r)}function d(...u){let r=0;for(;r<u.length;){let a=u.at(r);if(a.some())return a;r++}return E}})())(_||={});function v(t,i,e){{if(typeof t=="object"){let T=t,d=q(T.handler).unwrapOr(v.Handler);return{type:"Error",code:T.code,message:_.Handler.flag(T.message),payload:_.Handler.flag(T.payload),stack:_.Handler.flag(T.stack).unwrapOr(d.localStackTrace(v).unwrapOr(""))}}return{type:"Error",code:t,message:_.Handler.flag(i),payload:_.Handler.flag(e),stack:v.Handler.localStackTrace(v).unwrapOr("")}}}(i=>i.Handler=(()=>{let e;return e={match:T,panic:d,localStackTrace:u};function T(r,a,s){let l=r;if(!$.Handler.match(l))return!1;if(typeof a=="string"){let f=a;if(!$.Handler.match(l,f))return!1}let x=l;return typeof a=="function"?(a(x),!0):(typeof s=="function"&&s(x),!0)}function d(r,a,s){if(typeof r=="object"){let y=r,F=y.stack.split(`
`);throw F.shift(),y.stack=F.join(`
`),console.log(F,"ff"),`\x1Bc\x1B[31m${y.code}: ${y.message.unwrapOr("")}\x1B[0m
${y.stack}`}let l=r,x=q(a).unwrapOr(d),O=q(s).unwrapOr(e).localStackTrace(x).toResult(E).map(y=>{let F=y.split(`
`);return F.shift(),F.join(`
`)}).recover(()=>"<<< 404 >>>").unwrap();throw`\x1Bc\x1B[31m${l}\x1B[0m
${O}`}function u(r){let a=globalThis.Error();return globalThis.Error.captureStackTrace(a,r),a.stack?w(a.stack):E}})())(v||={});function B(t){return{inspect:i,parse:e};function i(){return t}function e(T){return T(i())?w(i()):E}}var q=_.Handler.flag,K=_.Handler.all,X=_.Handler.any,Q=I.Handler.all,z=I.Handler.any,L=I.Handler.wrap,Z=I.Handler.wrapAsync;function w(t){return{type:i,some:e,none:T,expect:d,unwrap:u,unwrapOr:r,and:a,map:s,toResult:l};function i(){return"Some"}function e(){return!0}function T(){return!1}function d(x){return t}function u(){return t}function r(x){return t}function a(x){return x(t)}function s(x){return w(x(t))}function l(x){return C(t)}}function S(t){{let e=t;return e?v(i(e),e.message):v("DOM.ERR_UNKNOWN")}function i(e){let T="DOM.ERR_UNKNOWN";return e.code===1||e.code===3||e.code===4||e.code===5||e.code===7||e.code===8||e.code===9||e.code===11||e.code===12||e.code===13||e.code===14||e.code===17||e.code===18||e.code===19||e.code===20||e.code===21||e.code===22||e.code===23||e.code===24||e.code===25?T=S.Exception.CodeRemap[e.code]:(e.name==="EncodingError"||e.name==="NotReadableError"||e.name==="UnknownError"||e.name==="ConstraintError"||e.name==="DataError"||e.name==="TransactionInactiveError"||e.name==="ReadOnlyError"||e.name==="VersionError"||e.name==="OperationError"||e.name==="NotAllowedError")&&(T=S.Exception.NameRemap[e.name]),T}}(i=>{let t;(d=>(d.NameRemap={EncodingError:"DOM.ERR_ENCODING",NotReadableError:"DOM.ERR_NOT_READABLE",UnknownError:"DOM.ERR_UNKNOWN",ConstraintError:"DOM.ERR_CONSTRAINT",DataError:"DOM.ERR_DATA",TransactionInactiveError:"DOM.ERR_TRANSACTION_INACTIVE",ReadOnlyError:"DOM.ERR_READ_ONLY",VersionError:"DOM.ERR_VERSION",OperationError:"DOM.ERR_OPERATION",NotAllowedError:"DOM.ERR_NOT_ALLOWED"},d.CodeRemap={1:"DOM.ERR_INDEX_SIZE",3:"DOM.ERR_HIERARCHY_REQUEST",4:"DOM.ERR_WRONG_DOCUMENT",5:"DOM.ERR_INVALID_CHARACTER",7:"DOM.ERR_NO_MODIFICATION_ALLOWED",8:"DOM.ERR_NOT_FOUND",9:"DOM.ERR_NOT_SUPPORTED",11:"DOM.ERR_INVALID_STATE",12:"DOM.ERR_SYNTAX",13:"DOM.ERR_INVALID_MODIFICATION",14:"DOM.ERR_NAMESPACE",17:"DOM.ERR_TYPE_MISMATCH",18:"DOM.ERR_SECURITY",19:"DOM.ERR_NETWORK",20:"DOM.ERR_ABORT",21:"DOM.ERR_URL_MISMATCH",22:"DOM.ERR_QUOTA_EXCEEDED",23:"DOM.ERR_TIMEOUT",24:"DOM.ERR_INVALID_NODE_TYPE",25:"DOM.ERR_DATA_CLONE"}))(t=i.Exception||={})})(S||={});var E=(()=>{let t;return t={type:i,some:e,none:T,expect:d,unwrapOr:u,and:r,map:a,toResult:s};function i(){return"None"}function e(){return!1}function T(){return!0}function d(l){v.Handler.panic(v({code:"PANIC",message:`${l||"A missing value has caused the program to panic."}`,stack:v.Handler.localStackTrace(d).unwrapOr("")}))}function u(l){return l}function r(l){return t}function a(l){return t}function s(l){return D(l)}})();function C(t){let i;return i={ok:e,err:T,expect:d,expectErr:u,unwrap:r,unwrapOr:a,and:s,map:l,mapErr:x,recover:f,degrade:O,toOption:y};function e(){return!0}function T(){return!1}function d(F){return r()}function u(F){v.Handler.panic(v("PANIC",F))}function r(){return t}function a(F){return r()}function s(F){return F(r())}function l(F){return C(F(r()))}function x(F){return i}function f(F){return i}function O(F){return D(F(r()))}function y(){return w(r())}}var I;(i=>i.Handler=(()=>{return{all:e,any:T,wrap:d,wrapAsync:u};function e(r){let a=[],s=0;for(;s<r.length;){let l=r.at(s);if(l.ok())a.push(l.unwrap());else return l;s++}return C(a)}function T(r){let a=[],s=0;for(;s<r.length;){let l=r.at(s);if(l.ok())return l;a.push(l.inspect()),s++}return D(a)}function d(r,...a){try{return C(r(...a))}catch(s){return D(B(s))}}async function u(r,...a){try{return C(await r(...a))}catch(s){return D(B(s))}}})())(I||={});function D(t,i){let e,T,d,u;return d=t,u=i??v.Handler,T=u.localStackTrace(D).unwrapOr(""),e={ok:r,err:a,inspect:s,stack:l,expect:x,expectErr:f,unwrapOr:O,and:y,map:F,mapErr:N,recover:A,degrade:H,toOption:P};function r(){return!1}function a(){return!0}function s(){return d}function l(){return T}function x(R){let k=s();if(typeof k=="string"&&(k.includes(".")?k.split(".")?.at(1)?.startsWith("ERR")&&v.Handler.panic(k,x):k.startsWith("ERR")&&v.Handler.panic(k,x)),typeof k=="string"&&k.includes(".")&&k.split(".")?.at(1)?.startsWith("ERR")&&v.Handler.panic(k,x),k instanceof globalThis.Error){let V=k.name,c=`${k.message} ${R?`${R}`:""}`,p=k.stack??l();v.Handler.panic(v({code:V,message:c,stack:p}))}v.Handler.match(s(),V=>{v.Handler.panic(v({code:V.code,message:`${V.message} ${R?`${R}`:""}`,stack:V.stack}))}),v.Handler.panic(v({code:"PANIC",message:`${R||"An unrecoverable error has caused the program to panic."}`,stack:v.Handler.localStackTrace(x).unwrapOr("")}))}function f(R){return s()}function O(R){return R}function y(R){return e}function F(R){return e}function N(R){return D(R(s()))}function A(R){return C(R(s()))}function H(R){return e}function P(){return E}}var h=`
Uh-oh, looks like Reliq took a wrong turn!
Don't worry, it's not you-it's us.
Please report this at https://github.com/snqre/reliq`;var $;(i=>i.Handler=(()=>{return{match:e};function e(d,u,r){let a=d;if(!T(a)||typeof u=="string"&&!T(a,u))return!1;let s=a;return typeof u=="function"?(u(s),!0):(typeof r=="function"&&r(s),!0)}function T(d,u){let r=d;return!(!(r!=null&&typeof r=="object"&&"type"in r&&typeof r.type=="string")||u&&r.type!==u)}})())($||={});var J;(i=>i.Handler=(()=>{return{match:e};function e(d,u,r){let a=d;if(!T(a)||typeof u=="string"&&!T(a,u))return!1;let s=a;return typeof u=="function"?(u(s),!0):(typeof r=="function"&&r(s),!0)}function T(d,u){let r=d;return!(!(r!=null&&typeof r=="object"&&"type"in r&&typeof r.type=="function"&&typeof r.type()=="string")||u&&r.type()!==u)}})())(J||={});function ee(t,i,e,...T){let d,u;{d=new Map,u=0n;let x=0n;for(;x<e;){let f=r();d.set(f,t(...T)),x++}return function(...f){let O,y;return O=E,y=F();function F(){return a().toResult(void 0).map(A=>(O=w(A),G(s(A),{deAlloc:N}))).recover(()=>(O=w(r()),G(t(...f),{deAlloc:N}))).unwrap()}function N(){return O.toResult(void 0).map(A=>{O=E,l(A,i(y.expect("Dyn: Could not deallocate resource but the key was available."+h)))}),y=U({deAlloc:N})}}}function r(){return u+=1n}function a(){let x=d.keys().toArray().at(0);return x?w(x):E}function s(x){let f=d.get(x);return d.delete(x),f}function l(x,f){d.set(x,f)}}function G(t,i){return{...w(t),...i}}function U(t){return{...E,...t}}function ne(t){let i,e,T;return e=0n,T=new Map,i={unwrap:d,mut:u,onChange:r};function d(){return t}function u(s){let l=d(),x=s;return t=s,T.values().toArray().forEach(f=>f(x,l)),i}function r(s){let l=a();return T.set(l,s),()=>{T.delete(l)}}function a(){return e+=1n}}export{G as Alloc,U as DeAlloc,S as DomError,ee as Dyn,D as Err,v as Error,b as Fpv,E as None,C as Ok,_ as Option,ne as Ref,I as Result,w as Some,B as Unsafe,K as allO,Q as allR,X as anyO,z as anyR,j as clone,q as flag,Y as toString,L as wrap,Z as wrapAsync};
//# sourceMappingURL=mod.js.map